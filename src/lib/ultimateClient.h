#ifndef ULTIMATE_CLIENT_H
#define ULTIMATE_CLIENT_H

#include <iostream>
#include <string>
#include "client.h"

/*
‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°ø‚†ø‚†õ‚†õ‚¢â‚£â‚£â‚£â‚£â‚°õ‚†õ‚†õ‚†õ‚†õ‚†õ‚†õ‚†ª‚†ª‚†ø‚†ø‚£ø‚£ø‚£ø‚£ø
‚£ø‚£ø‚£ø‚£ø‚†ü‚†ã‚†â‚£§‚£¥‚£∂‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£∂‚£¶‚£§‚†Ä‚†Å‚†Ä‚†Ñ‚†Ä‚†Ñ‚†Ä‚†å‚†â‚†õ
‚£ü‚†â‚†Å‚†Ä‚†Ä‚¢Ä‚£§‚£∂‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£∑‚£Ñ‚†Ä‚†ê‚†Ä‚†ê‚†Ä‚†ê‚†Ä
‚°ü‚†Ä‚†Ä‚†Ä‚†í‚†ã‚†â‚†â‚†à‚†Ä‚†â‚†â‚†ô‚†ª‚¢ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£¶‚°Ä‚†à‚¢Ä‚†à‚†Ä‚†Ñ
‚†Ä‚†Ä‚†Ä‚†Ä‚£Ä‚£¥‚†ñ‚¢Å‚£†‚£∂‚£∂‚£∂‚£¶‚£¥‚£ø‚£ø‚£ª‚£æ‚£ø‚£æ‚£ø‚£ª‚£ø‚£ø‚£ø‚£ß‚†Ä‚†Ä‚°Ä‚†Ç‚†Ä
‚†Ä‚£Ä‚£∞‚£æ‚°ø‚†Å‚¢†‚£ª‚£Ω‚£ø‚£ü‚£ø‚£ü‚£ø‚£ø‚£Ω‚£ø‚¢ø‚£∑‚°ø‚£ü‚£ø‚£∑‚£∑‚†π‚£ø‚°Ü‚†Ä‚†Ä‚°Ä‚†Å
‚†ò‚£ø‚£ø‚°ü‚†Å‚†Ä‚°æ‚£Ω‚£ø‚£Ø‚£ø‚£ø‚£ª‚£ø‚£Ω‚£ø‚£Ω‚£ø‚°ø‚£ø‚£ø‚¢ø‚£ª‚£æ‚°Ä‚†∏‚£Ø‚†Ä‚†Ä‚†Ä‚†Ñ
‚†Ä‚£∫‚°ø‚†Ä‚†Ä‚¢®‚£ü‚£ø‚£Ω‚£Ø‚£ø‚£æ‚£ø‚£ø‚£Ω‚£ø‚£Ω‚£ø‚¢ø‚£ü‚£ø‚£ø‚£ø‚£ø‚°ø‚°Ü‚†à‚†Ä‚†Ä‚†Ç‚†Ä
‚†Ä‚¢∫‚°Ø‚†Ä‚†Ä‚£º‚¢æ‚¢ª‚†ø‚†ª‚†ø‚†Ω‚£∑‚£ø‚£Ø‚£ø‚†ø‚†ö‚†õ‚†ô‚†â‚¢à‚£Ä‚††‚†å‚£Ä‚†Ä‚°Ä‚†Ä‚¢Ä‚†Å
‚†Ä‚†à‚†ü‚¢Ä‚£Ä‚¢à‚£Ä‚†Ñ‚¢Ä‚¢§‚†Ä‚†Ä‚†Ä‚†â‚£â‚£å‚†Ä‚¢Ä‚†Ä‚†ä‚¢ë‚£í‚†à‚†Ä‚£∏‚£ø‚°Ä‚£ø‚°Ä‚†Ä‚°Ä
‚†Ä‚†Ä‚¢∞‚°Ü‚†Ä‚†à‚†Å‚†Ç‚£©‚£§‚£§‚£§‚°Ä‚†Ä‚£æ‚£ø‚£¶‚£º‚£ø‚£æ‚£ø‚¢ø‚°æ‚¢Ä‚£ø‚£ü‚£ø‚°Ø‚†Ç‚†Ä‚°Ä
‚†Ä‚†Ä‚†Ä‚†ë‚†Ä‚†Ä‚†π‚£∂‚£ø‚£ø‚£ø‚£ø‚†ã‚¢Ä‚£∑‚£ø‚£ü‚£ø‚°Ø‚¢ø‚¢æ‚£ø‚£∑‚£æ‚£ø‚£ª‚£ø‚†É‚†Ä‚¢Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ê‚£§‚°ø‚£ø‚°æ‚†Ç‚†∞‚°Ö‚†ì‚°ø‚£ø‚°ª‚†É‚£Ñ‚†à‚†ö‚£Ω‚£æ‚°ø‚£ü‚†õ‚†Ä‚†Ä‚†Ñ‚†Ä
‚†Ä‚†Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ô‚†Å‚†Ä‚†Ä‚†Ä‚£§‚£§‚£Ä‚£Ä‚£¥‚£ø‚£ø‚£∑‚£§‚°Ä‚¢∏‚£ø‚°á‚†Ä‚†Ä‚†ê‚†à‚£ø
‚†Ä‚†Ä‚†Ç‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∞‚°¶‚†Ä‚†ê‚†ü‚†ã‚†â‚†â‚£Å‚£Ä‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£∞‚£ø‚°ß‚†Ä‚†ê‚†Ä‚¢º‚£ø
‚†Ä‚†Å‚°Ä‚†Ç‚†Ä‚†Ä‚†Ä‚†Ä‚†π‚£Ω‚°Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚£â‚£•‚£§‚£¶‚£∂‚£ø‚£∑‚¢ê‚£ø‚£ø‚†á‚†Ä‚†Ä‚†í‚†õ‚†õ
‚†Ä‚†Ñ‚†Ä‚†ê‚†à‚†Ä‚†Ä‚†Ä‚†Ä‚†õ‚£Æ‚£Ñ‚°¶‚†Ä‚†Ä‚£Ñ‚£ª‚£ø‚£ø‚£ø‚£ª‚£æ‚£ø‚£ø‚°õ‚†Ä‚£Ñ‚†Ä‚†à‚†Ä‚†Ç
‚†Ä‚††‚†à‚†Ä‚†Ç‚†Å‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ë‚†õ‚†Ö‚†Ä‚£º‚£ø‚£ø‚£ø‚£ø‚£ü‚£ø‚†∑‚†ã‚¢Ä‚£∞‚£ø‚°Ü‚††‚£Ñ‚†Ä
‚†Ä‚†Ñ‚†Ç‚†ê‚†Ä‚†Å‚†Ä‚†Ä‚¢Ä‚£Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢ª‚£ø‚£ø‚£ø‚£ø‚†é‚†Å‚†Ä‚£†‚£æ‚£ø‚£ø‚°á‚¢∏‚°æ‚°Ä
‚†Ä‚††‚†ê‚†Ä‚†Ç‚†Å‚†Ä‚†Ä‚†∏‚£æ‚£ó‚£¶‚£Ä‚°Ä‚†Ä‚†Ä‚†õ‚†ø‚£ø‚†è‚†Ä‚†§‚†ö‚†õ‚£ø‚£ø‚£ø‚°É‚£∏‚£ø‚†Ü
‚†Ä‚†Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£§‚†Ä‚¢ø‚£ø‚£ø‚†â‚†â‚†Ä‚†Ä‚†Ä‚†Ä‚†â‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚£ø‚£ø‚¢∞‚£ø‚£ø‚¢ß
‚†Ä‚†Ä‚†Ä‚†Ä‚°Ä‚†Ä‚†®‚£ø‚¢¶‚†à‚¢ø‚£∑‚°Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°Ñ‚†Ä‚†Ä‚¢¢‚£Ä‚†ê‚¢∂‚£Ω‚£ø‚†è‚£æ‚£ø‚£ø‚£Ø
‚£ø‚°≥‚†Ä‚†Ä‚†Ä‚†Ä‚†®‚£ø‚£Ø‚£∑‚°à‚¢ª‚£ø‚£ø‚°è‚£¥‚°ü‚†Ä‚†Ä‚†Ä‚†à‚£ø‚£∑‚£¶‚£ª‚£ø‚£ø‚£ø‚£ø‚£ø‚°∑
‚£ø‚†Ä‚†Ä‚†Ä‚†Å‚†Ä‚†Ä‚£ø‚£ø‚£∑‚£ø‚£¶‚£ô‚£ø‚£ø‚£ª‚†Å‚†Ä‚£≤‚†Ä‚†Ä‚†π‚†ø‚†ü‚†ü‚†õ‚†ã‚†ã‚¢â‚£â‚°â
‚°á‚†Ä‚†Ä‚†Ñ‚†Ç‚†Ä‚†Ä‚†ª‚†ø‚†ü‚†ã‚†ã‚†â‚†â‚†à‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†Ä‚°Ä‚†Ñ‚¢π‚£ø‚†Ä‚†å‚£ø‚°á
‚£∑‚£Ñ‚°Ä‚††‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°Ä‚¢Ä‚†Ä‚†Ñ‚†Ä‚†Ñ‚†Ç‚†ê‚†à‚¢Ä‚††‚†Ä‚¢Ä‚††‚¢∏‚£ø‚°Ö‚†Ä‚¢ø‚£ø
‚£ø‚£ø‚£ø‚£¶‚£Ñ‚°Ä‚¢Ä‚††‚†Ä‚†Ç‚†Å‚†Ä‚°Ä‚†Ä‚†Ñ‚†Ç‚¢Ä‚†ê‚†Ä‚†Ç‚†Ä‚°Ä‚†Ñ‚¢Ä‚†Ä‚†®‚£ø‚£á‚†Ä‚¢ò‚£ø
‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£∑‚£§‚£Ñ‚£ê‚†à‚†Ä‚°Ä‚†Ñ‚†Ä‚†Ç‚¢Ä‚††‚†ê‚†Ä‚†Å‚¢Ä‚†Ä‚°Ä‚†Ñ‚†Ç‚£ø‚£∑‚°Ä‚†Ñ‚£ø
‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£∑‚£∑‚£∂‚£§‚£§‚£•‚£Ä‚£Ñ‚£Ä‚£Ç‚£à‚£Ä‚£†‚£†‚£§‚£§‚£ø‚£ø‚£æ‚£ø‚£ø
*/


int send(std::string message, int server_port) {
    std::cout << "Sending message: " << message << std::endl;

    if (message.find('\0') != std::string::npos) {
        std::cerr << "Error: message contains '\\0'" << std::endl;
        return -1;
    }

    int BUFFER_SIZE = 1024;
    char buffer[BUFFER_SIZE] = {0};
    int return_value = 0;

    for (int i = 0; i < message.length(); i += BUFFER_SIZE) {
        for (int j = 0; j < BUFFER_SIZE; j++) {
            if (i + j < message.length()) {
                buffer[j] = message[i + j];
            } else {
                buffer[j] = '\0'; //üòÄ‚õÑÔ∏è
            }
        }
        int rv = sndmsg(buffer, server_port);
        if (rv == -1) {
            return_value = -1;
        }
    }

    return return_value;
}

#endif //ULTIMATE_CLIENT_H